<!--fadeLayer-->
<div class="fadeLayer" id="DelFade">
    <div class="container p-3 card askForDelete">
        <h3 class="p-3 bg-danger text-light">هل انت متأكد من حذف</h3>
        <h4 class="mb-2">الوحدة رقم {{unitDataView.unitNum}}</h4>
        <hr>
        <div class="d-flex flex-row-reverse">
            <button class="btn btn-danger mr-2" id="deletWorker" (click)="deletUnit()">نعم</button>
            <button class="btn btn-info" id="hideFadeLayer">الغاء</button>
        </div>

    </div>
</div>
<!--header-class="fa fa-calculator-->
<div class="container-fluid  p-3 card mt-3 sticky-top bg-light">

    <nav class="navbar navbar-light bg-light">
        <div class="form-inline">
            <h1 class="mb-3 px-2">الوحدات</h1>
            <div style="width: 1px; background-color: black; height: 90px;"></div>
            <button style="height: 70px;" class="btn btn-info ml-2 mx-2" id="showAddUnitBtn"
                (click)="showAddUnit()">اضافة</button>
            <button style="height: 70px;font-size: 1.5em;" class="btn btn-light ml-2 mx-2" id="unitEnquirybtn"
                (click)="showUnitEnquiry()">استعلام</button>
            <div class="headerLeftBorder"></div>
            <input *ngIf="router.url === '/unites'" [(ngModel)]="searchTxt" placeholder="بحث" class="form-control mx-3"
                id="unitSearch">
        </div>
        <button class="btn btn-info ml-2 mx-2 p-3" id="showcalculatorBtn"
            (click)="showcalculator()"><i class="fa fa-calculator"></i></button>
    </nav>
</div>

<!--addUnit-->
<div class="container-fluid  card p-3 mt-2 unitsClass" id="addUnit">
    <div class="p-4">
        <h2 class="pb-3 cardHeader">اضافة بيانات وحدة</h2>
        <form [formGroup]='unitData' (ngSubmit)="addNewUnit()" class="pt-3">
            <div class="row">
                <input formControlName="unitId" id="unitId" class="form-control d-none">
                <div class="form-group col-md-6">
                    <label>رقم الوحدة</label>
                    <input formControlName="unitNum" [(ngModel)]="unitDataView.unitNum" id="unitNum"
                        class="form-control">
                </div>
                <div class="form-group col-md-6">
                    <label>العمارة</label>
                    <input formControlName="unitBuildingNum" [(ngModel)]="unitDataView.unitBuildingNum"
                        id="unitBuildingNum" class="form-control">
                </div>
            </div>
            <div class="row">
                <div class="form-group col-md-6">
                    <label>المساحة</label>
                    <input formControlName="unitExtent" [(ngModel)]="unitDataView.unitExtent" id="unitExtent"
                        class="form-control">
                </div>
                <div class="form-group col-md-6">
                    <label>السعر</label>
                    <input formControlName="unitPrice" [(ngModel)]="unitDataView.unitPrice" id="unitPrice" type="number"
                        class="form-control">
                </div>
            </div>
            <div class="row">
                <div class="form-group col-md-6">
                    <label>الشركة</label>
                    <input formControlName="unitCompany" [(ngModel)]="unitDataView.unitCompany" id="unitCompany"
                        class="form-control">
                </div>
                <div class="form-group col-md-6">
                    <label>ميعاد التسليم</label>
                    <input formControlName="unitDate" [(ngModel)]="unitDataView.unitDate" id="unitDate"
                        class="form-control">
                </div>
            </div>
            <button class="btn btn-primary ml-2" type="submit" id="addNewUnitBtn">اضافة</button>
        </form>
    </div>
</div>
<!--unitEnquiry-->
<div class="container-fluid card  mt-3 p-5 unitsClass" id="unitEnquiry">
    <div class="panel-body panel-flex-table">
        <table class="flex-table table table-hover">
            <thead class="bg-dark text-light">
                <tr>
                    <th>رقم الوحدة</th>
                    <th>العمارة</th>
                    <th>المساحة</th>
                    <th>السعر</th>
                    <th>الشركة</th>
                    <th>ميعاد التسليم</th>
                    <th>تعديل</th>
                    <th>حذف</th>
                </tr>
            </thead>
            <tbody class=" mt-3 tableBody">
                <tr *ngFor="let unit of unites|unitSearch:searchTxt">
                    <td>{{unit.unitNum}}</td>
                    <td>{{unit.unitBuildingNum}}</td>
                    <td>{{unit.unitExtent}}</td>
                    <td>{{unit.unitPrice}}</td>
                    <td>{{unit.unitCompany}}</td>
                    <td>{{unit.unitDate}}</td>
                    <td><button class="btn btn-success ml-2" id="showUpdateUnit" (click)="showUpdateUnit(unit)"><i
                                class="fa fa-edit"></i></button></td>
                    <td><button class="btn btn-danger ml-2" (click)="askForDeleteUnit(unit)"><i
                                class="fa fa-trash"></i></button></td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<!--calculator--->
<div class="fadeLayer" id="calcFade"  style="display: none; padding-top: 10%;">
    <div class="container  card p-3 mt-2" id="calculator">
        <div>
            <button class="btn btn-danger mb-3" id="hideCalcLayer">×</button>
        </div>
        <div class="row">
            <div class="form-group col-md-2 col-sm-6">
                <label class="settinLable p-2">المساحة</label>
                <div class="input-group">
                    <div class="input-group-append">
                        <span class="input-group-text">متر</span>
                    </div>
                    <input type="number" class="form-control" [(ngModel)]='apartWidth'>
                </div>
            </div>
            <div class="form-group col-md-2 col-sm-6">
                <label class="settinLable p-2">سعر المتر</label>
                <div class="input-group">
                    <div class="input-group-append">
                        <span class="input-group-text">بالجنيه</span>
                    </div>
                    <input type="number" class="form-control" [(ngModel)]='metrPrice'>
                </div>
            </div>
            <div class="form-group col-md-2 col-sm-6">
                <label class="settinLable p-2">المقدمة</label>
                <div class="input-group">
                    <div class="input-group-append">
                        <span class="input-group-text">مئوية</span>
                    </div>
                    <input type="number" class="form-control" [(ngModel)]='preMoney'>
                </div>
            </div>
            <div class="form-group col-md-2 col-sm-6">
                <label class="settinLable p-2">عدد السنين</label>
                <div class="input-group">
                    <div class="input-group-append">
                        <span class="input-group-text">سنة</span>
                    </div>
                    <input type="number" class="form-control" [(ngModel)]='years'>
                </div>
            </div>
        </div>
        <div class="mt-2">
            <button class="btn btn-info" (click)='calcRemain()'>احسب</button>
        </div>
        <table class="table mt-2 table-hover" style="width: 100%;">
            <thead class="bg-dark text-light">
                <tr>
                    <th><h5>اجمالى السعر</h5></th>
                    <th><h5>المقدمة</h5></th>
                    <th><h5>المتبقى</h5></th>
                    <th><h5>الاقساط</h5></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="bigNum font-weight-bold"><h3>{{totalPrice}}</h3></td>
                    <td class="bigNum font-weight-bold"><h3>{{preMoneyResult}}</h3></td>
                    <td class="bigNum font-weight-bold"><h3>{{remainPrice}}</h3></td>
                    <td class="bigNum font-weight-bold"><h3>{{remainPaid}}</h3></td>
                </tr>
            </tbody>
        </table>
        
    </div>

</div>