<!--table-->
<div class="container-fluid">
    <div class="row" style="padding-left: 20px;">
        <div class="col-md-2">
            <div class="stickyInp">
                <div class="card">
                    <div class="panel-body panel-flex-table" style="height: fit-content;">
                        <table class="flex-table table table-hover">
                            <thead class="navHeader">
                                <tr>
                                    <th class="text-center">اسم المخزن</th>
                                </tr>
                            </thead>
                            <tbody class=" mt-3 tableBody">
                                <tr *ngFor="let stock of _stockService.stocks; let i = index">
                                    <td class="btn btn-light chooseBtn" id="showStockProfits{{i}}"
                                        (click)="showStockProfits(stock,i)" style="flex: 3;">{{stock.stockName}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="card mt-4 p-2" id="totalProfits" style="display: none;">
                    <input [(ngModel)]="searchProd" placeholder="بحث باسم الصنف" class="form-control mb-2"
                        id="searchProd">
                    <div>
                        <h5 class="darkBg p-2 text-light" style="border-radius: 5px;">صافى : {{totalProfit}}</h5>
                        <h5 class="bg-success p-2 text-light" style="border-radius: 5px;">ارباح : {{totalAdd}}</h5>
                        <h5 class="bg-danger p-2 text-light" style="border-radius: 5px;">خسائر : {{totalMin}}</h5>
                    </div>
                    <hr>
                    <button class="btn btn-outline-info m-2" id="showProfitsPreBtn"
                        (click)='showStockProfitsPre(stockInfo)'>تفاصيل حركة
                        البيع</button>
                </div>
            </div>
        </div>
        <!-- |searchProdProfit:searchProd -->

        <!-- newCode -->
        <div class="col-md-10 smokeBg" style="display: none;" id="productProfits">
            <div id="profitDetails">
                <div *ngFor='let product of profitArr|searchProdProfit:searchProd; let i = index'
                    class="row mb-3 bg-light" style="padding: 10px 0;">
                    <div class="col-md-1 darkBg text-light shadow-lg" style="text-align: center; border-radius: 5px;">
                        <div class="text-center">
                            <h3 class="text-center pt-3">{{product.name}}</h3>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="shadow card smokeBg">
                            <div class="panel-body panel-flex-table"
                                style="height: 100%; margin-top: 0px; margin-bottom: 5px;">
                                <table class="flex-table table table-hover">
                                    <thead class="navHeader">
                                        <tr>
                                            <th scope="col">السعر</th>
                                        </tr>
                                    </thead>
                                    <tbody class="tableBody" style="overflow-y: hidden;">
                                        <div id="soldProds">
                                            <tr>
                                                <td></td>
                                                <th scope="row" class="text-dark">
                                                    شراء
                                                </th>
                                                <th scope="row" class="text-dark">
                                                    بيع
                                                </th>
                                            </tr>
                                            <tr class="text-success">
                                                <th>
                                                    <i class="fa fa-caret-up pl-2"></i>
                                                    اعلى
                                                </th>
                                                <td>{{product.in.maxPrice}}</td>
                                                <td>{{product.sold.maxPrice}}</td>
                                            </tr>
                                            <!--  -->
                                            <tr class="text-primary">
                                                <th>
                                                    <i class="fa fa-sort"></i>
                                                    متوسط
                                                </th>
                                                <td>{{product.in.avr}}</td>
                                                <td>{{product.sold.avr}}</td>
                                            </tr>
                                            <tr class="text-danger">
                                                <th>
                                                    <i class="fa fa-caret-down pl-2"></i>
                                                    اقل
                                                </th>
                                                <td>{{product.in.minPrice}}</td>
                                                <td>{{product.sold.minPrice}}</td>
                                            </tr>
                                        </div>
                                        <!-- <div id="inProds">
                                            <tr class="text-success">
                                                <th scope="row" class="text-dark">
                                                    سعر بيع
                                                </th>
                                                <th>
                                                    <i class="fa fa-caret-up pl-2"></i>
                                                    اعلى
                                                </th>
                                                <td>{{product.sold.maxPrice}}</td>
                                            </tr>
                                            <tr class="text-primary">
                                                <th></th>
                                                <th>
                                                    <i class="fa fa-sort"></i>
                                                    متوسط
                                                </th>
                                                <td>{{product.sold.avr}}</td>
                                            </tr>
                                            <tr class="text-danger">
                                                <th></th>
                                                <th>
                                                    <i class="fa fa-caret-down pl-2"></i>
                                                    اقل
                                                </th>
                                                <td>{{product.sold.minPrice}}</td>
                                            </tr>
                                        </div> -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!-- secCard -->
                    <div class="col-md-3">
                        <div class="card shadow smokeBg">
                            <div class="panel-body panel-flex-table"
                                style="height: 100%; margin-top: 0px; margin-bottom: 5px;">
                                <table class="flex-table table table-hover">
                                    <thead class="navHeader">
                                        <tr>
                                            <th scope="col">بيان</th>
                                            <th scope="col">كمية</th>
                                            <th scope="col">قيمة</th>
                                        </tr>
                                    </thead>
                                    <tbody class="tableBody" style="overflow-y: hidden;">
                                        <tr>
                                            <th scope="row">شراء</th>
                                            <td>{{product.in.qty}}</td>
                                            <td>{{product.in.qtyVal}}</td>
                                        </tr>
                                        <tr class="bottomBorder">
                                            <th scope="row">بيع</th>
                                            <td>{{product.sold.qty}}</td>
                                            <td>{{product.sold.qtyVal}}</td>
                                        </tr>
                                        <tr>
                                            <th scope="row">متاح</th>
                                            <td>{{product.qtyRemain}}</td>
                                            <td>{{product.qtyRemainVal}}</td>
                                        </tr>
                                        <tr>
                                            <th scope="row" class="{{product.profitsColor}}">{{product.profitCond}}</th>
                                            <td class="{{product.profitsColor}}">{{product.profits}}</td>
                                            <td></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-5">
                        <div class="card shadow smokeBg">
                            <div class="panel-body panel-flex-table"
                                style="height: 100%; margin-top: 0px; margin-bottom: 5px;">
                                <table class="flex-table table table-hover">
                                    <thead class="navHeader">
                                        <tr>
                                            <th scope="col">بيان</th>
                                            <th scope="col">سعر</th>
                                            <th scope="col">{{product.profitLastPrice.desc()}}</th>
                                        </tr>
                                    </thead>
                                    <tbody class="tableBody" style="overflow-y: hidden;">
                                        <tr>
                                            <th scope="row">اخر سعر بيع</th>
                                            <td>{{product.sold.lastPrice()}}</td>
                                            <td class="{{product.profitLastPrice.color()}}">{{product.profitLastPrice.val()}}</td>
                                        </tr>
                                        <!-- <tr class="bottomBorder">
                                            <th scope="row">بيع</th>
                                            <td>{{product.sold.qty}}</td>
                                            <td>{{product.sold.qtyVal}}</td>
                                        </tr>
                                        <tr>
                                            <th scope="row">متاح</th>
                                            <td>{{product.qtyRemain}}</td>
                                            <td>{{product.qtyRemainVal}}</td>
                                        </tr>
                                        <tr>
                                            <th scope="row" class="{{product.profitsColor}}">{{product.profitCond}}</th>
                                            <td class="{{product.profitsColor}}">{{product.profits}}</td>
                                            <td></td>
                                        </tr> -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!-- thirdCard -->
                    <!-- <div class="col-md-4">
                        <div class="card shadow" style="background-color: whitesmoke;">
                            <div class="panel-body panel-flex-table"
                                style="height: 100%; margin-top: 0px; margin-bottom: 5px;">
                                <table class="flex-table table table-hover">
                                    <thead class="navHeader">
                                        <tr>
                                            <th scope="col">كمية</th>
                                            <th scope="col">{{product.profitCond}}</th>
                                        </tr>
                                    </thead>
                                    <tbody class="tableBody" style="overflow-y: hidden;">
                                        <tr>
                                            <td>{{product.sold.qty}}</td>
                                            <td class="{{product.profitsColor}}">{{product.profits}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div> -->
                </div>
            </div>
        </div>

        <div class="col-md-10" id='customersProfits' style="display: none;">
            <div class="card" id="profitDetails">
                <div class="panel-body panel-flex-table">
                    <table class="flex-table table table-hover">
                        <thead class="navHeader">
                            <tr>
                                <th>التاريخ</th>
                                <th>رقم الفاتورة</th>
                                <th style="flex: 2;">اسم العميل</th>
                                <th style="flex: 2;">الصنف</th>
                                <th>العدد</th>
                                <th>شراء</th>
                                <th>بيع</th>
                                <th>ربح</th>
                                <th>اجمالى ربح</th>
                            </tr>
                        </thead>
                        <tbody class=" mt-3 tableBody">
                            <tr *ngFor='let profit of profitArrCust; let i = index'>
                                <td>{{profit.date}}</td>
                                <td>{{profit.invNumber}}</td>
                                <td style="flex: 2;">{{profit.customerName}}</td>
                                <td style="flex: 2;">{{profit.productName}}</td>
                                <td>{{profit.Qty}}</td>
                                <td>{{profit.productCost}}</td>
                                <td>{{profit.price}}</td>
                                <td class="{{profit.color}}">{{profit.unitProfit}}</td>
                                <td class="{{profit.colorTotal}}">{{profit.totalProfit}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>